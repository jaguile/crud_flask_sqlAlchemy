<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catàleg de llibres de la biblioteca Armand Cardona</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js" integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>
</head>
<body>
    <nav class="navbar bg-dark navbar-expand-lg" data-bs-theme="dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 fs-1">Biblioteca Armand Cardona</span>
            <div class="collapse navbar-collapse justify-content-center">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a href="{{url_for('main_bp.mostrar_llibres')}}" class="nav-link">Llibres</a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link active">Usuaris</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{url_for('main_bp.mostrar_baixes')}}" class="nav-link">Baixes</a>
                    </li>
                    <li class="nav-item">
                        <a href="{{url_for('main_bp.mostrar_join')}}" class="nav-link">Join</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container mb-4 mt-4">
        {% if not usuaris %}
        <h2>Actualment no hi han usuaris de la biblioteca</h2>
        {% else %}
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">DNI</th>
                    <th scope="col">Cognoms</th>
                    <th scope="col">Noms</th>
                    <th scope="col"><input type="checkbox" id="global_baixa"></th>
                </tr>
            </thead>
            <tbody>
                <form method="POST" id="form_usuaris">
            {% for usuari in usuaris %}
                <tr>
                    <th scope="row"><a href="{{url_for('main_bp.veure_usuari', id = usuari.id)}}">{{usuari.id}}</a></th>
                    <td>{{usuari.dni}}</td>
                    <td>{{usuari.cognoms}}</td>
                    <td>{{usuari.nom}}</a></td>
                    <td><input type="checkbox" name="usuari" value="{{usuari.id}}" class="baixa_usuari"></td>
                </tr>
            {% endfor %}
                <tr>
                    <th scope="row" colspan="4"></th>
                    <td><span><a href="#" data-action="{{url_for('main_bp.baixa_usuaris')}}" id="global_baixa_action">
                            <img src="static/img/baixa.png" style="width: 15px;"/></a>
                        </span>
                    </td>
                </tr>
                </form>
            </tbody>
        </table>
        {%endif%}
    </div>
    <div class="container">
        <form action="{{url_for('main_bp.afegir_usuari')}}" method="POST" id="afegir_usuari">
            <div class="mb-3">
                <label for="dni" class="form-label">DNI</label>
                <!-- DNI o NIE: suposo que pot haver una primera lletra o dígit, 7 dígits i una lletra -->
                <input type="text" class="form-control" id="dni" name="dni" aria-describedby="titolHelp" 
                    pattern="[A-Z1-9]{1}[0-9]{7}[A-Z1-9]{1}" />
                <div id="dnilHelp" class="form-text">DNI o NIE amb lletra majúscula</div>
            </div>
            <div class="mb-3">
                <label for="nom" class="form-label">Nom usuari</label>
                <input type="text" class="form-control" id="nom" name="nom">
            </div>
            <div class="mb-3">
                <label for="cognoms" class="form-label">Cognoms</label>
                <input type="text" class="form-control" id="cognoms" name="cognoms">
            </div>
            <button type="submit" class="btn btn-primary">Afegir usuari</button>
        </form>
    </div>
    <script src="static/js/usuaris.js"></script>
</body>
</html>